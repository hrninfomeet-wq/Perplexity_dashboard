{
  "name": "NSE Trading Dashboard Test Suite",
  "description": "Comprehensive testing for Phase 3A Step 5 ML-enhanced trading system",
  "version": "3A.5",
  "baseUrl": "http://localhost:5000",
  "timeout": 10000,
  "retries": 3,
  
  "environments": {
    "local": {
      "baseUrl": "http://localhost:5000",
      "frontend": "http://localhost:3000"
    }
  },
  
  "testSuites": [
    {
      "name": "Core System Health",
      "description": "Basic system functionality validation",
      "tests": [
        {
          "name": "Backend Health Check",
          "endpoint": "/api/health",
          "method": "GET",
          "expectedStatus": 200,
          "assertions": [
            "response.status === 'healthy'",
            "response.uptime > 0"
          ]
        },
        {
          "name": "Multi-API System Health",
          "endpoint": "/api/multi/health", 
          "method": "GET",
          "expectedStatus": 200,
          "assertions": [
            "response.providers.length >= 3",
            "response.capacity > 500"
          ]
        },
        {
          "name": "ML System Health",
          "endpoint": "/api/v5/ml/health",
          "method": "GET", 
          "expectedStatus": 200,
          "assertions": [
            "response.ml_status === 'operational'",
            "response.neural_networks.pattern_classifier === true",
            "response.neural_networks.price_predictor === true"
          ]
        }
      ]
    },
    
    {
      "name": "ML Signal Enhancement Testing",
      "description": "Neural network and ML functionality validation",
      "tests": [
        {
          "name": "Enhanced Signal Generation",
          "endpoint": "/api/v5/ml/enhanced-signals",
          "method": "POST",
          "body": {
            "symbol": "RELIANCE",
            "timeframe": "1m",
            "indicators": ["RSI", "MACD", "BOLLINGER_BANDS"]
          },
          "expectedStatus": 200,
          "performance": {
            "maxResponseTime": 200
          },
          "assertions": [
            "response.signal !== undefined",
            "response.confidence > 0.5",
            "response.ml_enhanced === true",
            "response.processing_time < 100"
          ]
        },
        {
          "name": "Price Prediction Testing",
          "endpoint": "/api/v5/ml/price-predictions",
          "method": "POST",
          "body": {
            "symbol": "TCS",
            "timeframe": "5m",
            "prediction_horizon": 15
          },
          "expectedStatus": 200,
          "performance": {
            "maxResponseTime": 100
          },
          "assertions": [
            "response.prediction !== undefined",
            "response.direction !== undefined",
            "response.confidence > 0.7",
            "response.neural_network_prediction === true"
          ]
        },
        {
          "name": "Pattern Confidence Enhancement",
          "endpoint": "/api/v5/ml/pattern-confidence",
          "method": "POST",
          "body": {
            "symbol": "INFY",
            "patterns": ["DOJI", "HAMMER", "ENGULFING"],
            "timeframe": "15m"
          },
          "expectedStatus": 200,
          "assertions": [
            "response.enhanced_confidence !== undefined",
            "response.ml_validation === true",
            "response.pattern_scores.length > 0"
          ]
        },
        {
          "name": "Ensemble Model Performance",
          "endpoint": "/api/v5/ml/ensemble",
          "method": "POST",
          "body": {
            "symbol": "HDFCBANK",
            "models": ["pattern_classifier", "price_predictor"],
            "weight_method": "performance_based"
          },
          "expectedStatus": 200,
          "assertions": [
            "response.ensemble_signal !== undefined",
            "response.model_weights !== undefined",
            "response.performance_improvement > 0.15"
          ]
        }
      ]
    },
    
    {
      "name": "Technical Analysis Validation",
      "description": "Technical indicators and pattern recognition testing",
      "tests": [
        {
          "name": "Technical Indicators Batch",
          "endpoint": "/api/v3/indicators/batch",
          "method": "POST",
          "body": {
            "symbols": ["RELIANCE", "TCS", "INFY"],
            "indicators": ["RSI", "MACD", "BOLLINGER_BANDS", "ATR"],
            "timeframe": "5m"
          },
          "expectedStatus": 200,
          "performance": {
            "maxResponseTime": 300
          },
          "assertions": [
            "response.indicators !== undefined",
            "response.indicators.length === 3",
            "response.calculation_time < 200"
          ]
        },
        {
          "name": "Pattern Detection",
          "endpoint": "/api/v4/patterns/detect",
          "method": "POST",
          "body": {
            "symbol": "RELIANCE",
            "timeframe": "1m",
            "pattern_types": ["candlestick", "chart", "smart_money"]
          },
          "expectedStatus": 200,
          "performance": {
            "maxResponseTime": 200
          },
          "assertions": [
            "response.patterns !== undefined",
            "response.ml_confidence !== undefined",
            "response.detection_time < 150"
          ]
        }
      ]
    },
    
    {
      "name": "Performance & Load Testing",
      "description": "System performance and scalability validation",
      "loadTest": {
        "concurrent_users": 25,
        "duration": "2m",
        "ramp_up": "30s"
      },
      "tests": [
        {
          "name": "High-Frequency API Calls",
          "endpoint": "/api/v5/ml/enhanced-signals",
          "method": "POST",
          "body": {
            "symbol": "NIFTY50",
            "timeframe": "1m"
          },
          "performance": {
            "target_rps": 10,
            "maxResponseTime": 200,
            "errorRate": 0.01
          }
        }
      ]
    },
    
    {
      "name": "Integration Testing",
      "description": "End-to-end workflow validation",
      "tests": [
        {
          "name": "Complete Trading Signal Workflow",
          "workflow": [
            {
              "step": "Get Market Data",
              "endpoint": "/api/v2/market-data/RELIANCE",
              "method": "GET"
            },
            {
              "step": "Calculate Technical Indicators", 
              "endpoint": "/api/v3/indicators/calculate",
              "method": "POST",
              "body": {
                "symbol": "RELIANCE",
                "indicators": ["RSI", "MACD"]
              }
            },
            {
              "step": "Detect Patterns",
              "endpoint": "/api/v4/patterns/detect",
              "method": "POST", 
              "body": {
                "symbol": "RELIANCE",
                "timeframe": "5m"
              }
            },
            {
              "step": "Generate ML-Enhanced Signal",
              "endpoint": "/api/v5/ml/enhanced-signals",
              "method": "POST",
              "body": {
                "symbol": "RELIANCE",
                "timeframe": "5m"
              }
            }
          ],
          "assertions": [
            "workflow.totalTime < 500",
            "workflow.steps[3].response.ml_enhanced === true"
          ]
        }
      ]
    }
  ],
  
  "reporting": {
    "format": ["json", "html"],
    "outputDir": "./test-results",
    "includePerformanceMetrics": true,
    "includeCoverage": true
  },
  
  "notifications": {
    "onFailure": true,
    "onSuccess": false,
    "email": false
  }
}
